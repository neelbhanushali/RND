<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en">
<head>
<title>Calendar Converter</title>
<style type="text/css">
    BODY.main {
        margin-left: 15%;
        margin-right: 10%
    }
    INPUT.ctr {
        text-align: center
    }
</style>

<meta name="keywords" content="calendar, converter, Julian, Gregorian, Islamic, Hebrew, Persian, Mayan, Bahai, French, Indian">
<meta name="description" content="Calendar Converter">
<meta name="author" content="John Walker">
<meta name="robots" content="index">

<script language="JavaScript" src="astro.js">
</script>

<script language="JavaScript">
<!--

/*  You may notice that a variety of array variables logically local
    to functions are declared globally here.  In JavaScript, construction
    of an array variable from source code occurs as the code is
    interpreted.  Making these variables pseudo-globals permits us
    to avoid overhead constructing and disposing of them in each
    call on the function in which whey are used.  */

var J0000 = 1721424.5;                // Julian date of Gregorian epoch: 0000-01-01
var J1970 = 2440587.5;                // Julian date at Unix epoch: 1970-01-01
var JMJD  = 2400000.5;                // Epoch of Modified Julian Date system
var J1900 = 2415020.5;                // Epoch (day 1) of Excel 1900 date system (PC)
var J1904 = 2416480.5;                // Epoch (day 0) of Excel 1904 date system (Mac)

var NormLeap = new Array("Normal year", "Leap year");

/*  WEEKDAY_BEFORE  --  Return Julian date of given weekday (0 = Sunday)
                        in the seven days ending on jd.  */

function weekday_before(weekday, jd)
{
    return jd - jwday(jd - weekday);
}

/*  SEARCH_WEEKDAY  --  Determine the Julian date for: 

            weekday      Day of week desired, 0 = Sunday
            jd           Julian date to begin search
            direction    1 = next weekday, -1 = last weekday
            offset       Offset from jd to begin search
*/

function search_weekday(weekday, jd, direction, offset)
{
    return weekday_before(weekday, jd + (direction * offset));
}

//  Utility weekday functions, just wrappers for search_weekday

function nearest_weekday(weekday, jd)
{
    return search_weekday(weekday, jd, 1, 3);
}

function next_weekday(weekday, jd)
{
    return search_weekday(weekday, jd, 1, 7);
}

function next_or_current_weekday(weekday, jd)
{
    return search_weekday(weekday, jd, 1, 6);
}

function previous_weekday(weekday, jd)
{
    return search_weekday(weekday, jd, -1, 1);
}

function previous_or_current_weekday(weekday, jd)
{
    return search_weekday(weekday, jd, 1, 0);
}

function TestSomething()
{
}

//  LEAP_GREGORIAN  --  Is a given year in the Gregorian calendar a leap year ?

function leap_gregorian(year)
{
    return ((year % 4) == 0) &&
            (!(((year % 100) == 0) && ((year % 400) != 0)));
}

//  GREGORIAN_TO_JD  --  Determine Julian day number from Gregorian calendar date

var GREGORIAN_EPOCH = 1721425.5;

function gregorian_to_jd(year, month, day)
{
    return (GREGORIAN_EPOCH - 1) +
           (365 * (year - 1)) +
           Math.floor((year - 1) / 4) +
           (-Math.floor((year - 1) / 100)) +
           Math.floor((year - 1) / 400) +
           Math.floor((((367 * month) - 362) / 12) +
           ((month <= 2) ? 0 :
                               (leap_gregorian(year) ? -1 : -2)
           ) +
           day);
}

//  JD_TO_GREGORIAN  --  Calculate Gregorian calendar date from Julian day

function jd_to_gregorian(jd) {
    var wjd, depoch, quadricent, dqc, cent, dcent, quad, dquad,
        yindex, dyindex, year, yearday, leapadj;

    wjd = Math.floor(jd - 0.5) + 0.5;
    depoch = wjd - GREGORIAN_EPOCH;
    quadricent = Math.floor(depoch / 146097);
    dqc = mod(depoch, 146097);
    cent = Math.floor(dqc / 36524);
    dcent = mod(dqc, 36524);
    quad = Math.floor(dcent / 1461);
    dquad = mod(dcent, 1461);
    yindex = Math.floor(dquad / 365);
    year = (quadricent * 400) + (cent * 100) + (quad * 4) + yindex;
    if (!((cent == 4) || (yindex == 4))) {
        year++;
    }
    yearday = wjd - gregorian_to_jd(year, 1, 1);
    leapadj = ((wjd < gregorian_to_jd(year, 3, 1)) ? 0
                                                  :
                  (leap_gregorian(year) ? 1 : 2)
              );
    month = Math.floor((((yearday + leapadj) * 12) + 373) / 367);
    day = (wjd - gregorian_to_jd(year, month, 1)) + 1;

    return new Array(year, month, day);
}

//  ISO_TO_JULIAN  --  Return Julian day of given ISO year, week, and day

function n_weeks(weekday, jd, nthweek)
{
    var j = 7 * nthweek;

    if (nthweek > 0) {
        j += previous_weekday(weekday, jd);
    } else {
        j += next_weekday(weekday, jd);
    }
    return j;
}

function iso_to_julian(year, week, day)
{
    return day + n_weeks(0, gregorian_to_jd(year - 1, 12, 28), week);
}

//  JD_TO_ISO  --  Return array of ISO (year, week, day) for Julian day

function jd_to_iso(jd)
{
    var year, week, day;

    year = jd_to_gregorian(jd - 3)[0];
    if (jd >= iso_to_julian(year + 1, 1, 1)) {
        year++;
    }
    week = Math.floor((jd - iso_to_julian(year, 1, 1)) / 7) + 1;
    day = jwday(jd);
    if (day == 0) {
        day = 7;
    }
    return new Array(year, week, day);
}

//  ISO_DAY_TO_JULIAN  --  Return Julian day of given ISO year, and day of year

function iso_day_to_julian(year, day)
{
    return (day - 1) + gregorian_to_jd(year, 1, 1);
}

//  JD_TO_ISO_DAY  --  Return array of ISO (year, day_of_year) for Julian day

function jd_to_iso_day(jd)
{
    var year, day;

    year = jd_to_gregorian(jd)[0];
    day = Math.floor(jd - gregorian_to_jd(year, 1, 1)) + 1;
    return new Array(year, day);
}

/*  PAD  --  Pad a string to a given length with a given fill character.  */

function pad(str, howlong, padwith) {
    var s = str.toString();

    while (s.length < howlong) {
        s = padwith + s;
    }
    return s;
}

//  JULIAN_TO_JD  --  Determine Julian day number from Julian calendar date

var JULIAN_EPOCH = 1721423.5;

function leap_julian(year)
{
    return (year % 4) == ((year > 0) ? 0 : 3);
}

function julian_to_jd(year, month, day)
{

    /* Adjust negative common era years to the zero-based notation we use.  */

    if (year < 1) {
        year++;
    }

    /* Algorithm as given in Meeus, Astronomical Algorithms, Chapter 7, page 61 */

    if (month <= 2) {
        year--;
        month += 12;
    }

    return ((Math.floor((365.25 * (year + 4716))) +
            Math.floor((30.6001 * (month + 1))) +
            day) - 1524.5);
}

//  JD_TO_JULIAN  --  Calculate Julian calendar date from Julian day

function jd_to_julian(td) {
    var z, a, alpha, b, c, d, e, year, month, day;

    td += 0.5;
    z = Math.floor(td);

    a = z;
    b = a + 1524;
    c = Math.floor((b - 122.1) / 365.25);
    d = Math.floor(365.25 * c);
    e = Math.floor((b - d) / 30.6001);

    month = Math.floor((e < 14) ? (e - 1) : (e - 13));
    year = Math.floor((month > 2) ? (c - 4716) : (c - 4715));
    day = b - d - Math.floor(30.6001 * e);

    /*  If year is less than 1, subtract one to convert from
        a zero based date system to the common era system in
        which the year -1 (1 B.C.E) is followed by year 1 (1 C.E.).  */

    if (year < 1) {
        year--;
    }

    return new Array(year, month, day);
}

//  HEBREW_TO_JD  --  Determine Julian day from Hebrew date

var HEBREW_EPOCH = 347995.5;

//  Is a given Hebrew year a leap year ?

function hebrew_leap(year)
{
    return mod(((year * 7) + 1), 19) < 7;
}

//  How many months are there in a Hebrew year (12 = normal, 13 = leap)

function hebrew_year_months(year)
{
    return hebrew_leap(year) ? 13 : 12;
}

//  Test for delay of start of new year and to avoid
//  Sunday, Wednesday, and Friday as start of the new year.

function hebrew_delay_1(year)
{
    var months, days, parts;

    months = Math.floor(((235 * year) - 234) / 19);
    parts = 12084 + (13753 * months);
    day = (months * 29) + Math.floor(parts / 25920);

    if (mod((3 * (day + 1)), 7) < 3) {
        day++;
    }
    return day;
}

//  Check for delay in start of new year due to length of adjacent years

function hebrew_delay_2(year)
{
    var last, present, next;

    last = hebrew_delay_1(year - 1);
    present = hebrew_delay_1(year);
    next = hebrew_delay_1(year + 1);

    return ((next - present) == 356) ? 2 :
                                     (((present - last) == 382) ? 1 : 0);
}

//  How many days are in a Hebrew year ?

function hebrew_year_days(year)
{
    return hebrew_to_jd(year + 1, 7, 1) - hebrew_to_jd(year, 7, 1);
}

//  How many days are in a given month of a given year

function hebrew_month_days(year, month)
{
    //  First of all, dispose of fixed-length 29 day months

    if (month == 2 || month == 4 || month == 6 ||
        month == 10 || month == 13) {
        return 29;
    }

    //  If it's not a leap year, Adar has 29 days

    if (month == 12 && !hebrew_leap(year)) {
        return 29;
    }

    //  If it's Heshvan, days depend on length of year

    if (month == 8 && !(mod(hebrew_year_days(year), 10) == 5)) {
        return 29;
    }

    //  Similarly, Kislev varies with the length of year

    if (month == 9 && (mod(hebrew_year_days(year), 10) == 3)) {
        return 29;
    }

    //  Nope, it's a 30 day month

    return 30;
}

//  Finally, wrap it all up into...

function hebrew_to_jd(year, month, day)
{
    var jd, mon, months;

    months = hebrew_year_months(year);
    jd = HEBREW_EPOCH + hebrew_delay_1(year) +
         hebrew_delay_2(year) + day + 1;

    if (month < 7) {
        for (mon = 7; mon <= months; mon++) {
            jd += hebrew_month_days(year, mon);
        }
        for (mon = 1; mon < month; mon++) {
            jd += hebrew_month_days(year, mon);
        }
    } else {
        for (mon = 7; mon < month; mon++) {
            jd += hebrew_month_days(year, mon);
        }
    }

    return jd;
}

/*  JD_TO_HEBREW  --  Convert Julian date to Hebrew date
                      This works by making multiple calls to
                      the inverse function, and is this very
                      slow.  */

function jd_to_hebrew(jd)
{
    var year, month, day, i, count, first;

    jd = Math.floor(jd) + 0.5;
    count = Math.floor(((jd - HEBREW_EPOCH) * 98496.0) / 35975351.0);
    year = count - 1;
    for (i = count; jd >= hebrew_to_jd(i, 7, 1); i++) {
        year++;
    }
    first = (jd < hebrew_to_jd(year, 1, 1)) ? 7 : 1;
    month = first;
    for (i = first; jd > hebrew_to_jd(year, i, hebrew_month_days(year, i)); i++) {
        month++;
    }
    day = (jd - hebrew_to_jd(year, month, 1)) + 1;
    return new Array(year, month, day);
}

/*  EQUINOXE_A_PARIS  --  Determine Julian day and fraction of the
                          September equinox at the Paris meridian in
                          a given Gregorian year.  */

function equinoxe_a_paris(year)
{
    var equJED, equJD, equAPP, equParis, dtParis;

    //  September equinox in dynamical time
    equJED = equinox(year, 2);

    //  Correct for delta T to obtain Universal time
    equJD = equJED - (deltat(year) / (24 * 60 * 60));

    //  Apply the equation of time to yield the apparent time at Greenwich
    equAPP = equJD + equationOfTime(equJED);

    /*  Finally, we must correct for the constant difference between
        the Greenwich meridian and that of Paris, 2°20'15" to the
        East.  */

    dtParis = (2 + (20 / 60.0) + (15 / (60 * 60.0))) / 360;
    equParis = equAPP + dtParis;

    return equParis;
}

/*  PARIS_EQUINOXE_JD  --  Calculate Julian day during which the
                           September equinox, reckoned from the Paris
                           meridian, occurred for a given Gregorian
                           year.  */

function paris_equinoxe_jd(year)
{
    var ep, epg;

    ep = equinoxe_a_paris(year);
    epg = Math.floor(ep - 0.5) + 0.5;

    return epg;
}

/*  ANNEE_DE_LA_REVOLUTION  --  Determine the year in the French
                                revolutionary calendar in which a
                                given Julian day falls.  Returns an
                                array of two elements:

                                    [0]  Année de la Révolution
                                    [1]  Julian day number containing
                                         equinox for this year.
*/

var FRENCH_REVOLUTIONARY_EPOCH = 2375839.5;

function annee_da_la_revolution(jd)
{
    var guess = jd_to_gregorian(jd)[0] - 2,
        lasteq, nexteq, adr;

    lasteq = paris_equinoxe_jd(guess);
    while (lasteq > jd) {
        guess--;
        lasteq = paris_equinoxe_jd(guess);
    }
    nexteq = lasteq - 1;
    while (!((lasteq <= jd) && (jd < nexteq))) {
        lasteq = nexteq;
        guess++;
        nexteq = paris_equinoxe_jd(guess);
    }
    adr = Math.round((lasteq - FRENCH_REVOLUTIONARY_EPOCH) / TropicalYear) + 1;

    return new Array(adr, lasteq);
}

/*  JD_TO_FRENCH_REVOLUTIONARY  --  Calculate date in the French Revolutionary
                                    calendar from Julian day.  The five or six
                                    "sansculottides" are considered a thirteenth
                                    month in the results of this function.  */

function jd_to_french_revolutionary(jd)
{
    var an, mois, decade, jour,
        adr, equinoxe;

    jd = Math.floor(jd) + 0.5;
    adr = annee_da_la_revolution(jd);
    an = adr[0];
    equinoxe = adr[1];
    mois = Math.floor((jd - equinoxe) / 30) + 1;
    jour = (jd - equinoxe) % 30;
    decade = Math.floor(jour / 10) + 1;
    jour = (jour % 10) + 1;

    return new Array(an, mois, decade, jour);
}

/*  FRENCH_REVOLUTIONARY_TO_JD  --  Obtain Julian day from a given French
                                    Revolutionary calendar date.  */

function french_revolutionary_to_jd(an, mois, decade, jour)
{
    var adr, equinoxe, guess, jd;

    guess = FRENCH_REVOLUTIONARY_EPOCH + (TropicalYear * ((an - 1) - 1));
    adr = new Array(an - 1, 0);

    while (adr[0] < an) {
        adr = annee_da_la_revolution(guess);
        guess = adr[1] + (TropicalYear + 2);
    }
    equinoxe = adr[1];

    jd = equinoxe + (30 * (mois - 1)) + (10 * (decade - 1)) + (jour - 1);
    return jd;
}

//  LEAP_ISLAMIC  --  Is a given year a leap year in the Islamic calendar ?

function leap_islamic(year)
{
    return (((year * 11) + 14) % 30) < 11;
}

//  ISLAMIC_TO_JD  --  Determine Julian day from Islamic date

var ISLAMIC_EPOCH = 1948439.5;
var ISLAMIC_WEEKDAYS = new Array("al-'ahad", "al-'ithnayn",
                                 "ath-thalatha'", "al-'arb`a'",
                                 "al-khamis", "al-jum`a", "as-sabt");

function islamic_to_jd(year, month, day)
{
    return (day +
            Math.ceil(29.5 * (month - 1)) +
            (year - 1) * 354 +
            Math.floor((3 + (11 * year)) / 30) +
            ISLAMIC_EPOCH) - 1;
}

//  JD_TO_ISLAMIC  --  Calculate Islamic date from Julian day

function jd_to_islamic(jd)
{
    var year, month, day;

    jd = Math.floor(jd) + 0.5;
    year = Math.floor(((30 * (jd - ISLAMIC_EPOCH)) + 10646) / 10631);
    month = Math.min(12,
                Math.ceil((jd - (29 + islamic_to_jd(year, 1, 1))) / 29.5) + 1);
    day = (jd - islamic_to_jd(year, month, 1)) + 1;
    return new Array(year, month, day);
}

//  LEAP_PERSIAN  --  Is a given year a leap year in the Persian calendar ?

function leap_persian(year)
{
    return ((((((year - ((year > 0) ? 474 : 473)) % 2820) + 474) + 38) * 682) % 2816) < 682;
}

//  PERSIAN_TO_JD  --  Determine Julian day from Persian date

var PERSIAN_EPOCH = 1948320.5;
var PERSIAN_WEEKDAYS = new Array("Yekshanbeh", "Doshanbeh",
                                 "Seshhanbeh", "Chaharshanbeh",
                                 "Panjshanbeh", "Jomeh", "Shanbeh");

function persian_to_jd(year, month, day)
{
    var epbase, epyear;

    epbase = year - ((year >= 0) ? 474 : 473);
    epyear = 474 + mod(epbase, 2820);

    return day +
            ((month <= 7) ?
                ((month - 1) * 31) :
                (((month - 1) * 30) + 6)
            ) +
            Math.floor(((epyear * 682) - 110) / 2816) +
            (epyear - 1) * 365 +
            Math.floor(epbase / 2820) * 1029983 +
            (PERSIAN_EPOCH - 1);
}

//  JD_TO_PERSIAN  --  Calculate Persian date from Julian day

function jd_to_persian(jd)
{
    var year, month, day, depoch, cycle, cyear, ycycle,
        aux1, aux2, yday;


    jd = Math.floor(jd) + 0.5;

    depoch = jd - persian_to_jd(475, 1, 1);
    cycle = Math.floor(depoch / 1029983);
    cyear = mod(depoch, 1029983);
    if (cyear == 1029982) {
        ycycle = 2820;
    } else {
        aux1 = Math.floor(cyear / 366);
        aux2 = mod(cyear, 366);
        ycycle = Math.floor(((2134 * aux1) + (2816 * aux2) + 2815) / 1028522) +
                    aux1 + 1;
    }
    year = ycycle + (2820 * cycle) + 474;
    if (year <= 0) {
        year--;
    }
    yday = (jd - persian_to_jd(year, 1, 1)) + 1;
    month = (yday <= 186) ? Math.ceil(yday / 31) : Math.ceil((yday - 6) / 30);
    day = (jd - persian_to_jd(year, month, 1)) + 1;
    return new Array(year, month, day);
}

//  MAYAN_COUNT_TO_JD  --  Determine Julian day from Mayan long count

var MAYAN_COUNT_EPOCH = 584282.5;

function mayan_count_to_jd(baktun, katun, tun, uinal, kin)
{
    return MAYAN_COUNT_EPOCH +
           (baktun * 144000) +
           (katun  *   7200) +
           (tun    *    360) +
           (uinal  *     20) +
           kin;
}

//  JD_TO_MAYAN_COUNT  --  Calculate Mayan long count from Julian day

function jd_to_mayan_count(jd)
{
    var d, baktun, katun, tun, uinal, kin;

    d = jd - MAYAN_COUNT_EPOCH;
    baktun = Math.floor(d / 144000);
    d = mod(d, 144000);
    katun = Math.floor(d / 7200);
    d = mod(d, 7200);
    tun = Math.floor(d / 360);
    d = mod(d, 360);
    uinal = Math.floor(d / 20);
    kin = mod(d, 20);

    return new Array(baktun, katun, tun, uinal, kin);
}

//  JD_TO_MAYAN_HAAB  --  Determine Mayan Haab "month" and day from Julian day

var MAYAN_HAAB_MONTHS = new Array("Pop", "Uo", "Zip", "Zotz", "Tzec", "Xul",
                                  "Yaxkin", "Mol", "Chen", "Yax", "Zac", "Ceh",
                                  "Mac", "Kankin", "Muan", "Pax", "Kayab", "Cumku");

function jd_to_mayan_haab(jd)
{
    var lcount, day;

    lcount = jd - MAYAN_COUNT_EPOCH;
    day = mod(lcount + 8 + ((18 - 1) * 20), 365);

    return new Array (Math.floor(day / 20) + 1, mod(day, 20));
}

//  JD_TO_MAYAN_TZOLKIN  --  Determine Mayan Tzolkin "month" and day from Julian day

var MAYAN_TZOLKIN_MONTHS = new Array("Imix", "Ik", "Akbal", "Kan", "Chicchan",
                                     "Cimi", "Manik", "Lamat", "Muluc", "Oc",
                                     "Chuen", "Eb", "Ben", "Ix", "Men",
                                     "Cib", "Caban", "Etxnab", "Cauac", "Ahau");

function jd_to_mayan_tzolkin(jd)
{
    var lcount = jd - MAYAN_COUNT_EPOCH;

    return new Array (amod(lcount + 20, 20), amod(lcount + 4, 13));
}

//  BAHAI_TO_JD  --  Determine Julian day from Bahai date

var BAHAI_EPOCH = 2394646.5;
var BAHAI_WEEKDAYS = new Array("Jamál", "Kamál", "Fidál", "Idál",
                               "Istijlál", "Istiqlál", "Jalál");

function bahai_to_jd(major, cycle, year, month, day)
{
    var gy;

    gy = (361 * (major - 1)) + (19 * (cycle - 1)) + (year - 1) +
         jd_to_gregorian(BAHAI_EPOCH)[0];
    return gregorian_to_jd(gy, 3, 20) + (19 * (month - 1)) +
           ((month != 20) ? 0 : (leap_gregorian(gy + 1) ? -14 : -15))  +
           day;
}

//  JD_TO_BAHAI  --  Calculate Bahai date from Julian day

function jd_to_bahai(jd)
{
    var major, cycle, year, month, day,
        gy, bstarty, bys, days, bld;

    jd = Math.floor(jd) + 0.5;
    gy = jd_to_gregorian(jd)[0];
    bstarty = jd_to_gregorian(BAHAI_EPOCH)[0];
    bys = gy - (bstarty + (((gregorian_to_jd(gy, 1, 1) <= jd) && (jd <= gregorian_to_jd(gy, 3, 20))) ? 1 : 0));
    major = Math.floor(bys / 361) + 1;
    cycle = Math.floor(mod(bys, 361) / 19) + 1;
    year = mod(bys, 19) + 1;
    days = jd - bahai_to_jd(major, cycle, year, 1, 1);
    bld = bahai_to_jd(major, cycle, year, 20, 1);
    month = (jd >= bld) ? 20 : (Math.floor(days / 19) + 1);
    day = (jd + 1) - bahai_to_jd(major, cycle, year, month, 1);

    return new Array(major, cycle, year, month, day);
}

//  INDIAN_CIVIL_TO_JD  --  Obtain Julian day for Indian Civil date

var INDIAN_CIVIL_WEEKDAYS = new Array(
    "ravivara", "somavara", "mangalavara", "budhavara",
    "brahaspativara", "sukravara", "sanivara");

function indian_civil_to_jd(year, month, day)
{
    var Caitra, gyear, leap, start, jd, m;

    gyear = year + 78;
    leap = leap_gregorian(gyear);     // Is this a leap year ?
    start = gregorian_to_jd(gyear, 3, leap ? 21 : 22);
    Caitra = leap ? 31 : 30;

    if (month == 1) {
        jd = start + (day - 1);
    } else {
        jd = start + Caitra;
        m = month - 2;
        m = Math.min(m, 5);
        jd += m * 31;
        if (month >= 8) {
            m = month - 7;
            jd += m * 30;
        }
        jd += day - 1;
    }

    return jd;
}

//  JD_TO_INDIAN_CIVIL  --  Calculate Indian Civil date from Julian day

function jd_to_indian_civil(jd)
{
    var Caitra, Saka, greg, greg0, leap, start, year, yday, mday;

    Saka = 79 - 1;                    // Offset in years from Saka era to Gregorian epoch
    start = 80;                       // Day offset between Saka and Gregorian

    jd = Math.floor(jd) + 0.5;
    greg = jd_to_gregorian(jd);       // Gregorian date for Julian day
    leap = leap_gregorian(greg[0]);   // Is this a leap year?
    year = greg[0] - Saka;            // Tentative year in Saka era
    greg0 = gregorian_to_jd(greg[0], 1, 1); // JD at start of Gregorian year
    yday = jd - greg0;                // Day number (0 based) in Gregorian year
    Caitra = leap ? 31 : 30;          // Days in Caitra this year

    if (yday < start) {
        //  Day is at the end of the preceding Saka year
        year--;
        yday += Caitra + (31 * 5) + (30 * 3) + 10 + start;
    }

    yday -= start;
    if (yday < Caitra) {
        month = 1;
        day = yday + 1;
    } else {
        mday = yday - Caitra;
        if (mday < (31 * 5)) {
            month = Math.floor(mday / 31) + 2;
            day = (mday % 31) + 1;
        } else {
            mday -= 31 * 5;
            month = Math.floor(mday / 30) + 7;
            day = (mday % 30) + 1;
        }
    }

    return new Array(year, month, day);
}

/*  updateFromGregorian  --  Update all calendars from Gregorian.
                             "Why not Julian date?" you ask.  Because
                             starting from Gregorian guarantees we're
                             already snapped to an integral second, so
                             we don't get roundoff errors in other
                             calendars.  */

function updateFromGregorian()
{
    var j, year, mon, mday, hour, min, sec,
        weekday, julcal, hebcal, islcal, hmindex, utime, isoweek,
        may_countcal, mayhaabcal, maytzolkincal, bahcal, frrcal,
        indcal, isoday, xgregcal;

    year = new Number(document.gregorian.year.value);
    mon = document.gregorian.month.selectedIndex;
    mday = new Number(document.gregorian.day.value);
    hour = min = sec = 0;
    hour = new Number(document.gregorian.hour.value);
    min = new Number(document.gregorian.min.value);
    sec = new Number(document.gregorian.sec.value);

    //  Update Julian day

    j = gregorian_to_jd(year, mon + 1, mday) +
           ((sec + 60 * (min + 60 * hour)) / 86400.0);

    document.julianday.day.value = j;
    document.modifiedjulianday.day.value = j - JMJD;

    //  Update day of week in Gregorian box

    weekday = jwday(j);
    document.gregorian.wday.value = Weekdays[weekday];

    //  Update leap year status in Gregorian box

    document.gregorian.leap.value = NormLeap[leap_gregorian(year) ? 1 : 0];

    //  Update Julian Calendar

    julcal = jd_to_julian(j);
    document.juliancalendar.year.value = julcal[0];
    document.juliancalendar.month.selectedIndex = julcal[1] - 1;
    document.juliancalendar.day.value = julcal[2];
    document.juliancalendar.leap.value = NormLeap[leap_julian(julcal[0]) ? 1 : 0];

    //  Update Hebrew Calendar

    hebcal = jd_to_hebrew(j);
    if (hebrew_leap(hebcal[0])) {
        document.hebrew.month.options.length = 13;
        document.hebrew.month.options[11] = new Option("Adar I");
        document.hebrew.month.options[12] = new Option("Veadar");
    } else {
        document.hebrew.month.options.length = 12;
        document.hebrew.month.options[11] = new Option("Adar");
    }
    document.hebrew.year.value = hebcal[0];
    document.hebrew.month.selectedIndex = hebcal[1] - 1;
    document.hebrew.day.value = hebcal[2];
    hmindex = hebcal[1];
    if (hmindex == 12 && !hebrew_leap(hebcal[0])) {
        hmindex = 14;
    }
    document.hebrew.hebmonth.src = "figures/hebrew_month_" +
        hmindex + ".gif";
    switch (hebrew_year_days(hebcal[0])) {
        case 353:
            document.hebrew.leap.value = "Common deficient (353 days)";
            break;

        case 354:
            document.hebrew.leap.value = "Common regular (354 days)";
            break;

        case 355:
            document.hebrew.leap.value = "Common complete (355 days)";
            break;

        case 383:
            document.hebrew.leap.value = "Embolismic deficient (383 days)";
            break;

        case 384:
            document.hebrew.leap.value = "Embolismic regular (384 days)";
            break;

        case 385:
            document.hebrew.leap.value = "Embolismic complete (385 days)";
            break;

        default:
            document.hebrew.leap.value = "Invalid year length: " +
                hebrew_year_days(hebcal[0]) + " days.";
            break;
    }

    //  Update Islamic Calendar

    islcal = jd_to_islamic(j);
    document.islamic.year.value = islcal[0];
    document.islamic.month.selectedIndex = islcal[1] - 1;
    document.islamic.day.value = islcal[2];
    document.islamic.wday.value = "yawm " + ISLAMIC_WEEKDAYS[weekday];
    document.islamic.leap.value = NormLeap[leap_islamic(islcal[0]) ? 1 : 0];

    //  Update Persian Calendar

    perscal = jd_to_persian(j);
    document.persian.year.value = perscal[0];
    document.persian.month.selectedIndex = perscal[1] - 1;
    document.persian.day.value = perscal[2];
    document.persian.wday.value = PERSIAN_WEEKDAYS[weekday];
    document.persian.leap.value = NormLeap[leap_persian(perscal[0]) ? 1 : 0];

    //  Update Mayan Calendars

    may_countcal = jd_to_mayan_count(j);
    document.mayancount.baktun.value = may_countcal[0];
    document.mayancount.katun.value = may_countcal[1];
    document.mayancount.tun.value = may_countcal[2];
    document.mayancount.uinal.value = may_countcal[3];
    document.mayancount.kin.value = may_countcal[4];
    mayhaabcal = jd_to_mayan_haab(j);
    document.mayancount.haab.value = "" + mayhaabcal[1] + " " + MAYAN_HAAB_MONTHS[mayhaabcal[0] - 1];
    maytzolkincal = jd_to_mayan_tzolkin(j);
    document.mayancount.tzolkin.value = "" + maytzolkincal[1] + " " + MAYAN_TZOLKIN_MONTHS[maytzolkincal[0] - 1];

    //  Update Bahai Calendar

    bahcal = jd_to_bahai(j);
    document.bahai.kull_i_shay.value = bahcal[0];
    document.bahai.vahid.value = bahcal[1];
    document.bahai.year.selectedIndex = bahcal[2] - 1;
    document.bahai.month.selectedIndex = bahcal[3] - 1;
    document.bahai.day.selectedIndex = bahcal[4] - 1;
    document.bahai.weekday.value = BAHAI_WEEKDAYS[weekday];
    document.bahai.leap.value = NormLeap[leap_gregorian(year) ? 1 : 0];  // Bahai uses same leap rule as Gregorian

    //  Update Indian Civil Calendar

    indcal = jd_to_indian_civil(j);
    document.indiancivilcalendar.year.value = indcal[0];
    document.indiancivilcalendar.month.selectedIndex = indcal[1] - 1;
    document.indiancivilcalendar.day.value = indcal[2];
    document.indiancivilcalendar.weekday.value = INDIAN_CIVIL_WEEKDAYS[weekday];
    document.indiancivilcalendar.leap.value = NormLeap[leap_gregorian(indcal[0] + 78) ? 1 : 0];

    //  Update French Republican Calendar

    frrcal = jd_to_french_revolutionary(j);
    document.french.an.value = frrcal[0];
    document.french.mois.selectedIndex = frrcal[1] - 1;
    document.french.decade.selectedIndex = frrcal[2] - 1;
    document.french.jour.selectedIndex = ((frrcal[1] <= 12) ? frrcal[3] : (frrcal[3] + 11)) - 1;

    //  Update Gregorian serial number

    if (document.gregserial != null) {
        document.gregserial.day.value = j - J0000;
    }

    //  Update Excel 1900 and 1904 day serial numbers

    document.excelserial1900.day.value = (j - J1900) + 1 +
            /*  Microsoft marching morons thought 1900 was a leap year.
                Adjust dates after 1900-02-28 to compensate for their
                idiocy.  */
            ((j > 2415078.5) ? 1 : 0)
        ;
    document.excelserial1904.day.value = j - J1904;

    //  Update Unix time()

    utime = (j - J1970) * (60 * 60 * 24 * 1000);
    document.unixtime.time.value = Math.round(utime / 1000);

    //  Update ISO Week

    isoweek = jd_to_iso(j);
    document.isoweek.year.value = isoweek[0];
    document.isoweek.week.value = isoweek[1];
    document.isoweek.day.value = isoweek[2];

    //  Update ISO Day

    isoday = jd_to_iso_day(j);
    document.isoday.year.value = isoday[0];
    document.isoday.day.value = isoday[1];
}

//  calcGregorian  --  Perform calculation starting with a Gregorian date

function calcGregorian()
{
    updateFromGregorian();
}

//  calcJulian  --  Perform calculation starting with a Julian date

function calcJulian()
{
    var j, date, time;

    j = new Number(document.julianday.day.value);
    date = jd_to_gregorian(j);
    time = jhms(j);
    document.gregorian.year.value = date[0];
    document.gregorian.month.selectedIndex = date[1] - 1;
    document.gregorian.day.value = date[2];
    document.gregorian.hour.value = pad(time[0], 2, " ");
    document.gregorian.min.value = pad(time[1], 2, "0");
    document.gregorian.sec.value = pad(time[2], 2, "0");
    updateFromGregorian();
}

//  setJulian  --  Set Julian date and update all calendars

function setJulian(j)
{
    document.julianday.day.value = new Number(j);
    calcJulian();
}

//  calcModifiedJulian  --  Update from Modified Julian day

function calcModifiedJulian()
{
    setJulian((new Number(document.modifiedjulianday.day.value)) + JMJD);
}

//  calcJulianCalendar  --  Update from Julian calendar

function calcJulianCalendar()
{
    setJulian(julian_to_jd((new Number(document.juliancalendar.year.value)),
                           document.juliancalendar.month.selectedIndex + 1,
                           (new Number(document.juliancalendar.day.value))));
}

//  calcHebrew  --  Update from Hebrew calendar

function calcHebrew()
{
    setJulian(hebrew_to_jd((new Number(document.hebrew.year.value)),
                          document.hebrew.month.selectedIndex + 1,
                          (new Number(document.hebrew.day.value))));
}

//  calcIslamic  --  Update from Islamic calendar

function calcIslamic()
{
    setJulian(islamic_to_jd((new Number(document.islamic.year.value)),
                           document.islamic.month.selectedIndex + 1,
                           (new Number(document.islamic.day.value))));
}

//  calcPersian  --  Update from Persian calendar

function calcPersian()
{
    setJulian(persian_to_jd((new Number(document.persian.year.value)),
                           document.persian.month.selectedIndex + 1,
                           (new Number(document.persian.day.value))));
}

//  calcMayanCount  --  Update from the Mayan Long Count

function calcMayanCount()
{
    setJulian(mayan_count_to_jd((new Number(document.mayancount.baktun.value)),
                                (new Number(document.mayancount.katun.value)),
                                (new Number(document.mayancount.tun.value)),
                                (new Number(document.mayancount.uinal.value)),
                                (new Number(document.mayancount.kin.value))));
}

//  calcBahai  --  Update from Bahai calendar

function calcBahai()
{
    setJulian(bahai_to_jd((new Number(document.bahai.kull_i_shay.value)),
                          (new Number(document.bahai.vahid.value)),
                          document.bahai.year.selectedIndex + 1,
                          document.bahai.month.selectedIndex + 1,
                          document.bahai.day.selectedIndex + 1));
}

//  calcIndianCivilCalendar  --  Update from Indian Civil Calendar

function calcIndianCivilCalendar()
{
    setJulian(indian_civil_to_jd(
                           (new Number(document.indiancivilcalendar.year.value)),
                           document.indiancivilcalendar.month.selectedIndex + 1,
                           (new Number(document.indiancivilcalendar.day.value))));
}

//  calcFrench  -- Update from French Republican calendar

function calcFrench()
{
    var decade, j, mois;

    j = document.french.jour.selectedIndex;
    decade = document.french.decade.selectedIndex;
    mois = document.french.mois.selectedIndex;

    /*  If the currently selected day is one of the sansculottides,
        adjust the index to be within that period and force the
        decade to zero and the month to 12, designating the
        intercalary interval.  */

    if (j > 9) {
        j -= 11;
        decade = 0;
        mois = 12;
    }

    /*  If the selected month is the pseudo-month of the five or
        six sansculottides, ensure that the decade is 0 and the day
        number doesn't exceed six.  To avoid additional overhead, we
        don't test whether a day number of 6 is valid for this year,
        but rather simply permit it to wrap into the first day of
        the following year if this is a 365 day year.  */

    if (mois == 12) {
        decade = 0;
        if (j > 5) {
            j = 0;
        }
    }

    setJulian(french_revolutionary_to_jd((new Number(document.french.an.value)),
                                         mois + 1,
                                         decade + 1,
                                         j + 1));
}

//  calcGregSerial  --  Update from Gregorian serial day number

function calcGregSerial()
{
    setJulian((new Number(document.gregserial.day.value)) + J0000);
}

//  calcExcelSerial1900  --  Perform calculation starting with an Excel 1900 serial date

function calcExcelSerial1900()
{
    var d = new Number(document.excelserial1900.day.value);

    /* Idiot Kode Kiddies didn't twig to the fact
       (proclaimed in 1582) that 1900 wasn't a leap year,
       so every Excel day number in every database on Earth
       which represents a date subsequent to February 28,
       1900 is off by one.  Note that there is no
       acknowledgement of this betrayal or warning of its
       potential consequences in the Excel help file.  Thank
       you so much Mister Talking Paper Clip.  Some day
       we're going to celebrate your extinction like it was
       February 29 ... 1900.  */

    if (d > 60) {
        d--;
    }

    setJulian((d - 1) + J1900);
}

//  calcExcelSerial1904  --  Perform calculation starting with an Excel 1904 serial date

function calcExcelSerial1904()
{
    setJulian((new Number(document.excelserial1904.day.value)) + J1904);
}

//  calcUnixTime  --  Update from specified Unix time() value

function calcUnixTime()
{
    var t = new Number(document.unixtime.time.value);

    setJulian(J1970 + (t / (60 * 60 * 24)));
}

//  calcIsoWeek  --  Update from specified ISO year, week, and day

function calcIsoWeek()
{
    var year = new Number(document.isoweek.year.value),
        week = new Number(document.isoweek.week.value),
        day = new Number(document.isoweek.day.value);

    setJulian(iso_to_julian(year, week, day));
}

//  calcIsoDay  --  Update from specified ISO year and day of year

function calcIsoDay()
{
    var year = new Number(document.isoday.year.value),
        day = new Number(document.isoday.day.value);

    setJulian(iso_day_to_julian(year, day));
}

// -->
</script>

</head>

<!--  Why don't we apply the "main" style class to the following body
      tag so the text is nicely laid out rather than drooling
      to both edges of the page?  Because Netscrape, as of 4.7,
      forgets the indentation on both sides as soon as it sees the
      first left-aligned table, and that looks even dumber.
      Exploder gets it right, but we don't create Exploder-specific
      documents here.
-->

<body bgcolor="#FFFFFF">

<h1>Calendar Converter</h1>

<hr>

<p>

Welcome to <a href="/">Fourmilab</a>'s calendar converter!
This page allows you to interconvert dates in a variety of
calendars, both civil and computer-related.  All
calculations are done in JavaScript executed in your own
browser; complete source code is embedded in or linked to
this page, and you're free to <a href="calcalc.zip">download</a>
these files to your own
computer and use them even when not connected to the
Internet.  To use the page, your browser must support
JavaScript and you must not have disabled execution of that
language.  Let's see...

<p>

<center>

<form name="warning">
<input type="text" name="warning" value="Your browser doesn't support JavaScript or it is disabled--you cannot use this calculator." size=70 class=ctr readonly>
</form>
</center>

<script language="JavaScript">
<!--
    //  Clear out "sorry, no JavaScript" message from text box.
    document.warning.warning.value = "Your browser supports JavaScript--you can use this calculator.";
// -->
</script>

<p>

If the box above says "Your browser supports JavaScript", you're in business;
simply enter a date in any of the boxes below and press the "Calculate"
button to show that date in all of the other calendars.

<!--
                      <h3>Debugging Console</h3>

<form name="debug">

<center>
<textarea name="log" wrap="off" rows=16 cols=80>
</textarea>
<br>
<input type="button" value=" Clear " onClick="document.debug.log.value = '';">
&nbsp;
<input type="button" value=" Test " onClick="TestSomething();">
</center>
</form>
<br>
<h4><a href="javascript:">JavaScript Console</a></h4>
<script language="JavaScript">
function dump(s, v)
{
    document.debug.log.value += "" + s + " = " + v + "\n";
}
</script>
-->

                     <h3>Gregorian Calendar</h3>

<form name="gregorian">
<table align=left hspace=8 width="45%" border cellpadding=5 bgcolor="#D0D0D0">

<tr>
<th>
    Date:
<td align=center>

    <input type="text" name="year" value="1998" size="5">
    <select name=month size=1>
        <option value=1>January
        <option value=2>February
        <option value=3>March
        <option value=4>April
        <option value=5>May
        <option value=6>June
        <option value=7>July
        <option value=8>August
        <option value=9>September
        <option value=10>October
        <option value=11>November
        <option value=12>December
    </select>
    <input type="text" name="day" value="1" size="3">

    <br>

    <input type="text" name="leap" value="" size="12" class=ctr readonly>

<tr>
<th>
    Time:
<td align=center>
    <input type="text" name="hour" value="00" size="2">:<input type="text" name="min" value="00" size="2">:<input type="text" name="sec" value="00" size="2">

<tr>
<th>
    Weekday:
<td align=center>
    <input type="text" name="wday" value="" size="9" class=ctr readonly>

<tr>
<td colspan=2 align=center>
<input type="button" value="Calculate" onClick="calcGregorian();">
</table>
</form>

<script language="JavaScript">
<!--

    //  A little JavaScript action to preset the fields in
    //  the request form to today's date.

    var today = new Date();

    /*  The following idiocy is due to bizarre incompatibilities
        in the behaviour of getYear() between Netscrape and
        Exploder.  The ideal solution is to use getFullYear(),
        which returns the actual year number, but that would
        break this code on versions of JavaScript prior to
        1.2.  So, for the moment we use the following code
        which works for all versions of JavaScript and browsers
        for all year numbers greater than 1000.  When we're willing
        to require JavaScript 1.2, this may be replaced by
        the single line:

            document.gregorian.year.value = today.getFullYear();

        Thanks to Larry Gilbert for pointing out this problem.
    */

    var y = today.getYear();
    if (y < 1000) {
        y += 1900;
    }
    document.gregorian.year.value = y

    document.gregorian.month.selectedIndex = today.getMonth();
    document.gregorian.day.value = today.getDate();
// -->
</script>

The Gregorian calendar was proclaimed by Pope Gregory XIII and took
effect in most Catholic states in 1582, in which October 4, 1582 of
the Julian calendar was followed by October 15 in the new calendar,
correcting for the accumulated discrepancy between the Julian calendar
and the equinox as of that date.  When comparing historical dates,
it's important to note that the Gregorian calendar, used universally
today in Western countries and in international commerce, was
adopted at different times by different countries.  Britain and 
her colonies (including what is now the United States), did not switch
to the Gregorian calendar until 1752, when Wednesday 2nd September
in the Julian calendar dawned as Thursday the 14th in the Gregorian.

<p>

The Gregorian calendar is a minor correction to the Julian.  In the
Julian calendar every fourth year is a leap year in which February has
29, not 28 days, but in the Gregorian, years divisible by 100 are
<em>not</em> leap years unless they are also divisible by 400.  How
prescient was Pope Gregory!  Whatever the problems of Y2K, they won't
include sloppy programming which assumes every year divisible by 4 is
a leap year since 2000, unlike the previous and subsequent years
divisible by 100, <em>is</em> a leap year.  As in the Julian calendar,
days are considered to begin at midnight.

<p>

The average length of a year in the Gregorian calendar is 365.2425
days compared to the actual solar tropical year (time from equinox to
equinox) of 365.24219878 days, so the calendar accumulates one day of
error with respect to the solar year about every 3300 years.  As a purely
solar calendar, no attempt is made to synchronise the start of months
to the phases of the Moon.

<p>

While one can't properly speak of "Gregorian dates" prior to
the adoption of the calendar in 1582, the calendar can be
extrapolated to prior dates.  In doing so, this
implementation uses the convention that the year prior to
year 1 is year 0.  This differs from the Julian calendar in
which there is no year 0--the year before year 1 in the Julian
calendar is year -1.  The date December 30th, 0 in the Gregorian
calendar corresponds to January 1st, 1 in the Julian calendar.

<p>

A slight modification of the Gregorian calendar would make it even more
precise.  If you add the additional rule that years evenly divisible
by 4000 are <em>not</em> leap years, you obtain an average solar year
of 365.24225 days per year which, compared to the actual mean year
of 365.24219878, is equivalent to an error of one day over a period
of about 19,500 years; this is comparable to errors due to tidal
braking of the rotation of the Earth.
<br clear=left>

                         <h3>Julian Day</h3>

<form name="julianday">
<table align=left hspace=8 width="45%" border cellpadding=5 bgcolor="#D0D0D0">

<tr>
<td align=center>
    <b>Julian day:</b>

    <input type="text" name="day" value="" size="16">
<tr>
<td colspan=2 align=center>
<input type="button" value="Calculate" onClick="calcJulian();">
</table>
</form>

Astronomers, unlike historians, frequently need to do arithmetic
with dates.  For example: a double star goes into eclipse every
1583.6 days and its last mid-eclipse was measured to be on
October 17, 2003 at 21:17 UTC.  When is the next?  Well, you could
get out your calendar and count days, but it's far easier
to convert all the quantities in question to Julian day numbers
and simply add or subtract.  Julian days simply enumerate the days
and fraction which have elapsed since the start of the
<em>Julian era</em>, which is defined as beginning at noon
on Monday, 1st January of year 4713 B.C.E. in the Julian
calendar.  This date is defined in terms of a cycle of years,
but has the additional advantage that all known historical astronomical
observations bear positive Julian day numbers, and periods can
be determined and events extrapolated by simple addition and
subtraction.  Julian dates are a tad eccentric in starting at
noon, but then so are astronomers (and systems programmers!)--when
you've become accustomed to rising after the "crack of noon" and
doing most of your work when the Sun is down, you appreciate
recording your results in a calendar where the date doesn't change
in the middle of your workday.  But even the Julian day convention 
bears witness to the eurocentrism of 19th century astronomy--noon
at Greenwich is midnight on the other side of the world.  But the Julian
day notation is so deeply embedded in astronomy that it is unlikely
to be displaced at any time in the foreseeable future.  It is an ideal
system for storing dates in computer programs, free of cultural bias
and discontinuities at various dates, and can be readily transformed
into other calendar systems, as the source code for this page illustrates.
Use Julian days and fractions (stored in 64 bit or longer floating
point numbers) in your programs, and be ready for Y10K, Y100K,
and Y1MM!
<br clear=left>

<p>

<form name="modifiedjulianday">
<table align=left hspace=8 width="45%" border cellpadding=5 bgcolor="#D0D0D0">

<tr>
<td align=center>
    <b>Modified Julian day:</b>

    <input type="text" name="day" value="" size="16">
<tr>
<td colspan=2 align=center>
<input type="button" value="Calculate" onClick="calcModifiedJulian();">
</table>
</form>

While any event in recorded human history can be written as
a positive Julian day number, when working with contemporary
events all those digits can be cumbersome.  A <em>Modified
Julian Day</em> (MJD) is created by subtracting 2400000.5
from a Julian day number, and thus represents the number of
days elapsed since midnight (00:00) Universal Time on
November 17, 1858.  Modified Julian Days are widely used to
specify the epoch in tables of orbital elements of
artificial Earth satellites.  Since no such objects existed
prior to October 4, 1957, all satellite-related MJDs are
positive.
<br clear=left>

                     <h3>Julian Calendar</h3>

<form name="juliancalendar">
<table align=left hspace=8 width="45%" border cellpadding=5 bgcolor="#D0D0D0">

<tr>
<th>
    Date:
<td align=center>

    <input type="text" name="year" value="" size="5">
    <select name=month size=1>
        <option value=1>January
        <option value=2>February
        <option value=3>March
        <option value=4>April
        <option value=5>May
        <option value=6>June
        <option value=7>July
        <option value=8>August
        <option value=9>September
        <option value=10>October
        <option value=11>November
        <option value=12>December
    </select>
    <input type="text" name="day" value="" size="3">

    <br>

    <input type="text" name="leap" value="" size="12" class=ctr readonly>

<tr>
<td colspan=2 align=center>
<input type="button" value="Calculate" onClick="calcJulianCalendar();">
</table>
</form>

The Julian calendar was proclaimed by Julius Cæsar in 46 B.C.
and underwent several modifications before reaching its final
form in 8 C.E.  The Julian calendar differs from the Gregorian
only in the determination of leap years, lacking the correction
for years divisible by 100 and 400 in the Gregorian calendar.
In the Julian calendar, any positive year is a leap year if
divisible by 4.  (Negative years are leap years if when
divided by 4 a remainder of 3 results.)  Days are considered to
begin at midnight.

<p>

In the Julian calendar the average year has a length of 365.25 days.
compared to the actual solar tropical year
of 365.24219878 days.  The calendar thus accumulates one day of
error with respect to the solar year every 128 years.
Being a purely solar calendar, no attempt is made to synchronise the
start of months to the phases of the Moon.

<br clear=left>

<!--
                         <h3>Gregorian Serial Day</h3>

<form name="gregserial">
<table align=left hspace=8 width="45%" border cellpadding=5 bgcolor="#D0D0D0">

<tr>
<td align=center>
    <b>Gregorian serial day:</b>
    <input type="text" name="day" value="" size="16">
<tr>
<td colspan=2 align=center>
<input type="button" value="Calculate" onClick="calcGregSerial();">
</table>
</form>
<br clear=left>
-->

                     <h3>Hebrew Calendar</h3>

<form name="hebrew">

<table align=left hspace=8 width="45%" border cellpadding=5 bgcolor="#D0D0D0">

<tr>
<th>
    Date:
<td align=center>

    <input type="text" name="year" value="" size="5">
    <select name="month" size=1>
        <option value=1>Nisan
        <option value=2>Iyyar
        <option value=3>Sivan
        <option value=4>Tammuz
        <option value=5>Av
        <option value=6>Elul
        <option value=7>Tishri
        <option value=8>Heshvan
        <option value=9>Kislev
        <option value=10>Teveth
        <option value=11>Shevat
        <option value=12>Adar
        <option value=13>Veadar
    </select>
    <input type="text" name="day" value="" size="3">

    <br>

    <input type="text" name="leap" value="" size="36" class=ctr readonly>

<tr>
<th>
    Hebrew month:
<td align=center>
    <img src="figures/hebrew_month_0.gif" name="hebmonth" width=186 height=51 alt="">

<tr>
<td colspan=2 align=center>
<input type="button" value="Calculate" onClick="calcHebrew();">
</table>
</form>

The Hebrew (or Jewish) calendar attempts to simultaneously
maintain alignment between the months and the seasons and
synchronise months with the Moon--it is thus deemed a
"<em>luni-solar calendar</em>".  In addition, there are constraints
on which days of the week on which a year can begin and to shift
otherwise required extra days to prior years to keep the
length of the year within the prescribed bounds.
This isn't easy, and the
computations required are correspondingly intricate.

<p>

Years are classified as <em>common</em> (normal) or
<em>embolismic</em> (leap) years which occur in a 19 year
cycle in years 3, 6, 8, 11, 14, 17, and 19.  In an
embolismic (leap) year, an extra <em>month</em> of 29 days,
"Veadar" or "Adar II", is added to the end of the year after
the month "Adar", which is designated "Adar I" in such
years.  Further, years may be <em>deficient</em>,
<em>regular</em>, or <em>complete</em>, having respectively
353, 354, or 355 days in a common year and 383, 384, or 385
days in embolismic years.  Days are defined as beginning at
sunset, and the calendar begins at sunset the night before
Monday, October 7, 3761 B.C.E. in the Julian calendar, or
Julian day 347995.5.  Days are numbered with Sunday as day 1,
through Saturday: day 7.

<p>

The average length of a month is 29.530594 days, extremely close
to the mean <em>synodic month</em> (time from new Moon to
next new Moon) of 29.530588 days.  Such is the accuracy that
more than 13,800 years elapse before a single day
discrepancy between the calendar's average reckoning of the
start of months and the mean time of the new Moon.
Alignment with the solar year is better than the Julian
calendar, but inferior to the Gregorian.  The average length
of a year is 365.2468 days compared to the actual solar tropical
year (time from equinox to equinox) of 365.24219 days, so
the calendar accumulates one day of error with respect to
the solar year every 216 years.

<br clear=left>

                     <h3>Islamic Calendar</h3>

<form name="islamic">
<table align=left hspace=8 width="45%" border cellpadding=5 bgcolor="#D0D0D0">

<tr>
<th>
    Date:
<td align=center>

    <input type="text" name="year" value="" size="5">
    <select name=month size=1>
        <option value=1>Muharram
        <option value=2>Safar
        <option value=3>Rabi`al-Awwal
        <option value=4>Rabi`ath-Thani
        <option value=5>Jumada l-Ula
        <option value=6>Jumada t-Tania
        <option value=7>Rajab
        <option value=8>Sha`ban
        <option value=9>Ramadan
        <option value=10>Shawwal
        <option value=11>Dhu l-Qa`da
        <option value=12>Dhu l-Hijja
    </select>
    <input type="text" name="day" value="" size="3">

    <br>

    <input type="text" name="leap" value="" size="12" class=ctr readonly>

<tr>
<th>
    Weekday:
<td align=center>
    <input type="text" name="wday" value="" size="18" class=ctr readonly>

<tr>
<td colspan=2 align=center>
<input type="button" value="Calculate" onClick="calcIslamic();">
</table>
</form>

The Islamic calendar is purely lunar and consists of twelve alternating
months of 30 and 29 days, with the final 29 day month extended to
30 days during leap years.  Leap years follow a 30 year cycle
and occur in years 1, 5, 7, 10, 13, 16, 18, 21, 24, 26, and 29.
Days are considered to begin at sunset.  The calendar begins
on Friday, July 16th, 622 C.E. in the Julian calendar, Julian
day 1948439.5, the day of Muhammad's flight from Mecca to Medina,
with sunset on the preceding day reckoned as the first day of
the first month of year 1 A.H.--"<em>Anno Hegiræ</em>"--the Arabic word
for "separate" or "go away".  Weeks begin on Sunday, and the
names for the days are just their numbers: Sunday is the first
day and Saturday the seventh.

<p>

Each cycle of 30 years thus contains 19 normal years of 354
days and 11 leap years of 355, so the average length of a
year is therefore ((19 × 354) + (11 × 355)) / 30 =
354.365...  days, with a mean length of month of 1/12 this
figure, or 29.53055...  days, which closely approximates the
mean <em>synodic month</em> (time from new Moon to next new
Moon) of 29.530588 days, with the calendar only slipping one
day with respect to the Moon every 2525 years.  Since the calendar
is fixed to the Moon, not the solar year, the months shift
with respect to the seasons, with each month beginning about
11 days earlier in each successive solar year.

<p>

The calendar presented here is the most commonly used
civil calendar in the Islamic world; for religious purposes
months are defined to start with the first observation of
the crescent of the new Moon.

<br clear=left>

                     <h3>Persian Calendar</h3>

<form name="persian">
<table align=left hspace=8 width="45%" border cellpadding=5 bgcolor="#D0D0D0">

<tr>
<th>
    Date:
<td align=center>

    <input type="text" name="year" value="" size="5">
    <select name=month size=1>
        <option value=1>Farvardin
        <option value=2>Ordibehesht
        <option value=3>Khordad
        <option value=4>Tir
        <option value=5>Mordad
        <option value=6>Shahrivar
        <option value=7>Mehr
        <option value=8>Aban
        <option value=9>Azar
        <option value=10>Dey
        <option value=11>Bahman
        <option value=12>Esfand
    </select>
    <input type="text" name="day" value="" size="3">

    <br>

    <input type="text" name="leap" value="" size="12" class=ctr readonly>

<tr>
<th>
    Weekday:
<td align=center>
    <input type="text" name="wday" value="" size="13" class=ctr readonly>

<tr>
<td colspan=2 align=center>
<input type="button" value="Calculate" onClick="calcPersian();">
</table>
</form>

The modern Persian calendar was adopted in 1925, supplanting
(while retaining the month names of) a traditional
calendar dating from the eleventh century.  The calendar
consists of 12 months, the first six of which are 31
days, the next five 30 days, and the final month 29
days in a normal year and 30 days in a leap year.

<p>

As one of the few calendars designed in the era of accurate
positional astronomy, the Persian calendar uses a very complex
leap year structure which makes it the most accurate solar
calendar in use today.  Years are grouped into <em>cycles</em>
which begin with four normal years after which every fourth
subsequent year in the cycle is a leap year.  Cycles are grouped
into <em>grand cycles</em> of either 128 years (composed of
cycles of 29, 33, 33, and 33 years) or 132 years, containing
cycles of of 29, 33, 33, and 37 years.  A <em>great grand
cycle</em> is composed of 21 consecutive 128 year grand cycles
and a final 132 grand cycle, for a total of 2820 years.  The
pattern of normal and leap years which began in 1925 will not
repeat until the year 4745!

<p>

Each 2820 year great grand cycle contains 2137 normal
years of 365 days and 683 leap years of 366 days,
with the average year length over the great grand cycle
of 365.24219852.  So close is this to the actual
solar tropical year of 365.24219878 days that the
Persian calendar accumulates an error of one day
only every 3.8 million years.  As a purely solar
calendar, months are not synchronised with the
phases of the Moon.

<br clear=left>

                         <h3>Mayan Calendars</h3>

<form name="mayancount">
<table align=left hspace=8 width="45%" border cellpadding=5 bgcolor="#D0D0D0">

<tr>
<td align=center>
    <b>Mayan Long Count</b>
    <br>

    <input type="text" name="baktun" value="" size="4">
    <b>.</b>
    <input type="text" name="katun" value="" size="3">
    <b>.</b>
    <input type="text" name="tun" value="" size="3">
    <b>.</b>
    <input type="text" name="uinal" value="" size="3">
    <b>.</b>
    <input type="text" name="kin" value="" size="3">

<p>

    <b>Haab:</b>&nbsp;&nbsp;<input type="text" name="haab" value="" size="9" class=ctr readonly>
<br>
    <b>Tzolkin:</b>&nbsp;&nbsp;<input type="text" name="tzolkin" value="" size="10" class=ctr readonly>

<tr>
<td colspan=2 align=center>
<input type="button" value="Calculate" onClick="calcMayanCount();">
</table>
</form>

The Mayans employed three calendars, all organised as hierarchies
of cycles of days of various lengths.  The <em>Long Count</em> was
the principal calendar for historical purposes, the <em>Haab</em>
was used as the civil calendar, while the <em>Tzolkin</em>
was the religious calendar.  All of the Mayan calendars
are based on serial counting of days without means for synchronising
the calendar to the Sun or Moon, although the Long Count and Haab
calendars contain cycles of 360 and 365 days, respectively, which
are roughly comparable to the solar year.  Based purely on counting
days, the Long Count more closely resembles the
Julian Day system and contemporary computer representations of
date and time than other calendars devised in antiquity.
Also distinctly modern in appearance is that days and
cycles count from zero, not one as in most other calendars,
which simplifies the computation of dates, and that numbers
as opposed to names were used for all of the cycles.

<p>

<table align=right border cellpadding=5 bgcolor="#D0D0D0">
<tr>
<th>Cycle
<th>Composed of
<th>Total<br> Days
<th>Years<br>(approx.)

<tr>
<td><b>kin</b>
<td>&nbsp;
<td align=center>1
<td>&nbsp;

<tr>
<td><b>uinal</b>
<td align=center>20 kin
<td align=center>20
<td align=center>&nbsp;

<tr>
<td><b>tun</b>
<td align=center>18 uinal
<td align=center>360
<td align=center>0.986

<tr>
<td><b>katun</b>
<td align=center>20 tun
<td align=center>7200
<td align=center>19.7

<tr>
<td><b>baktun</b>
<td align=center>20 katun
<td align=center>144,000
<td align=center>394.3

<tr>
<td><b>pictun</b>
<td align=center>20 baktun
<td align=center>2,880,000
<td align=center>7,885

<tr>
<td><b>calabtun</b>
<td align=center>20 piktun
<td align=center>57,600,000
<td align=center>157,704

<tr>
<td><b>kinchiltun</b>
<td align=center>20 calabtun
<td align=center>1,152,000,000
<td align=center>3,154,071

<tr>
<td><b>alautun</b>
<td align=center>20 kinchiltun
<td align=center>23,040,000,000
<td align=center>63,081,429

</table>

The Long Count calendar is organised into the
hierarchy of cycles shown at the right.
Each of the cycles is composed of 20 of the next
shorter cycle with the exception of the <em>tun</em>,
which consists of 18 <em>uinal</em> of 20 days each.
This results in a <em>tun</em> of 360 days, which maintains
approximate alignment with the solar year over modest
intervals--the calendar comes undone from the
Sun 5 days every <em>tun</em>.

<p>

The Mayans believed at at the conclusion of each
<em>pictun</em> cycle of about 7,885 years the universe is
destroyed and re-created.  Those with apocalyptic
inclinations will be relieved to observe that the present
cycle will not end until Columbus Day, October 12, 4772 in
the Gregorian calendar.  Speaking of apocalyptic events,
it's amusing to observe that the longest of the cycles in
the Mayan calendar, <em>alautun</em>, about 63 million
years, is comparable to the 65 million years since the
impact which brought down the curtain on the dinosaurs--an
impact which occurred near the Yucatan peninsula where,
almost an <em>alautun</em> later, the Mayan civilisation
flourished.  If the universe is going to be destroyed and
the end of the current <em>pictun</em>, there's no point in
writing dates using the longer cycles, so we dispense
with them here.

<p>

Dates in the Long Count calendar are written, by convention,
as:

<p>
<center>
<em>baktun</em>&nbsp;<b>.</b>&nbsp;<em>katun</em>&nbsp;<b>.</b>&nbsp;<em>tun</em>&nbsp;<b>.</b>&nbsp;<em>uinal</em>&nbsp;<b>.</b>&nbsp;<em>kin</em>
</center>
<p>

and thus resemble present-day Internet IP addresses!

<p>

For civil purposes the Mayans used the <em>Haab</em>
calendar in which the year was divided into 18 named periods
of 20 days each, followed by five <em>Uayeb</em> days
not considered part of any period.  Dates in this
calendar are written as a day number (0 to 19 for regular
periods and 0 to 4 for the days of <em>Uayeb</em>) followed
by the name of the period.  This calendar has no concept of
year numbers; it simply repeats at the end of the complete
365 day cycle.  Consequently, it is not possible, given a
date in the Haab calendar, to determine the Long
Count or year in other calendars.  The 365 day cycle
provides better alignment with the solar year than the 360
day <em>tun</em> of the Long Count but, lacking a leap year
mechanism, the Haab calendar shifted one day with
respect to the seasons about every four years.

<p>

The Mayan religion employed the <em>Tzolkin</em> calendar,
composed of 20 named periods of 13 days.  Unlike the
Haab calendar, in which the day numbers increment
until the end of the period, at which time the next period
name is used and the day count reset to 0, the names and numbers
in the Tzolkin calendar advance in parallel.  On each
successive day, the day number is incremented by 1, being
reset to 0 upon reaching 13, and the next in the cycle of twenty
names is affixed to it.  Since 13 does not evenly divide 20,
there are thus a total of 260 day number and period names before
the calendar repeats.  As with the Haab calendar, cycles
are not counted and one cannot, therefore, convert a Tzolkin
date into a unique date in other calendars.  The 260 day cycle
formed the basis for Mayan religious events and has no relation
to the solar year or lunar month.

<p>

The Mayans frequently specified dates using <em>both</em> the Haab
and Tzolkin calendars; dates of this form repeat only
every 52 solar years.

<br clear=all>

                     <h3>Bahá'í Calendar</h3>

<form name="bahai">
<table align=left hspace=8 width="45%" border cellpadding=5 bgcolor="#D0D0D0">

<tr>
<th>
    Date:
<td align=center>
    Kull-i-Shay:&nbsp;<input type="text" name="kull_i_shay" value="" size="3">

    &nbsp; &nbsp;

    Váhid:&nbsp;<input type="text" name="vahid" value="" size="3">

    <br>
    Year:&nbsp;<select name=year size=1>
        <option value=1>Alif
        <option value=2>Bá'
        <option value=3>Ab
        <option value=4>Dál
        <option value=5>Báb
        <option value=6>Váv
        <option value=7>Abad
        <option value=8>Jád
        <option value=9>Bahá
        <option value=10>Hubb
        <option value=11>Bahháj
        <option value=12>Javáb
        <option value=13>Ahad
        <option value=14>Vahháb
        <option value=15>Vidád
        <option value=16>Badí'
        <option value=17>Bahí
        <option value=18>Abhá
        <option value=19>Vahíd
    </select>

    <br>
    Month:&nbsp;<select name=month size=1>
        <option value=1>Bahá
        <option value=2>Jalál
        <option value=3>Jamál
        <option value=4>`Azamat
        <option value=5>Núr
        <option value=6>Rahmat
        <option value=7>Kalimát
        <option value=8>Kamál
        <option value=9>Asmá'
        <option value=10>`Izzat
        <option value=11>Mashíyyat
        <option value=12>`Ilm
        <option value=13>Qudrat
        <option value=14>Qawl
        <option value=15>Masáil
        <option value=16>Sharaf
        <option value=17>Sultán
        <option value=18>Mulk
        <option value=19>Ayyám-i-Há
        <option value=20>`Alá'
    </select>


    <br>
    Day:&nbsp;<select name=day size=1>
        <option value=1>Bahá
        <option value=2>Jalál
        <option value=3>Jamál
        <option value=4>`Azamat
        <option value=5>Núr
        <option value=6>Rahmat
        <option value=7>Kalimát
        <option value=8>Kamál
        <option value=9>Asmá'
        <option value=10>`Izzat
        <option value=11>Mashíyyat
        <option value=12>`Ilm
        <option value=13>Qudrat
        <option value=14>Qawl
        <option value=15>Masáil
        <option value=16>Sharaf
        <option value=17>Sultán
        <option value=18>Mulk
        <option value=19>`Alá'
    </select>

    <br>
    Weekday:&nbsp;&nbsp;<input type="text" name="weekday" value="" size="9" class=ctr readonly>

    <br>

    <input type="text" name="leap" value="" size="12" class=ctr readonly>

<tr>
<td colspan=2 align=center>
<input type="button" value="Calculate" onClick="calcBahai();">
</table>
</form>

The Bahá'í calendar is a solar calendar organised as a
hierarchy of cycles, each of length 19, commemorating the 19
year period between the 1844 proclamation of the Báb in
<a href="/images/eclipse99/iranimages.html#Shiraz" target="_blank">Shiraz</a> and
the revelation by Bahá'u'lláh in 1863.  Days are named in a
cycle of 19 names.  Nineteen of these cycles of 19 days,
usually called "months" even though they have nothing
whatsoever to do with the Moon, make up a year, with a
period between the 18th and 19th months referred to as
<em>Ayyám-i-Há</em> not considered part of any month; this
period is four days in normal years and five days in leap
years.  The rule for leap years is identical to that of the
Gregorian calendar, so the Bahá'í calendar shares its
accuracy and remains synchronised.  The same cycle of 19
names is used for days and months.

<p>

The year begins at the equinox, March 21, the Feast of
Naw-Rúz; days begin at sunset.  Years have their own
cycle of 19 names, called the <em>Váhid</em>.  Successive cycles of
19 years are numbered, with cycle 1 commencing on March 21, 1844,
the year in which the Báb announced his prophecy.
Cycles, in turn, are assembled into <em>Kull-I-Shay</em>
super-cycles of 361 (19²) years.  The first <em>Kull-I-Shay</em>
will not end until Gregorian calendar year 2205.  A week of seven
days is superimposed on the calendar, with the week considered to
begin on Saturday.  Confusingly, three of the names of weekdays
are identical to names in the 19 name cycles for days and months.

<br clear=left>

               <h3>Indian Civil Calendar</h3>

<form name="indiancivilcalendar">
<table align=left hspace=8 width="45%" border cellpadding=5 bgcolor="#D0D0D0">

<tr>
<th>
    Date:
<td align=center>

    <input type="text" name="year" value="" size="5">
    <select name=month size=1>
        <option value=1>Caitra
        <option value=2>Vaisakha
        <option value=3>Jyaistha
        <option value=4>Asadha
        <option value=5>Sravana
        <option value=6>Bhadra
        <option value=7>Asvina
        <option value=8>Kartika
        <option value=9>Agrahayana
        <option value=10>Pausa
        <option value=11>Magha
        <option value=12>Phalguna
    </select>
    <input type="text" name="day" value="" size="3">

    <br>

    Weekday: 
    <input type="text" name="weekday" value="" size="15" class=ctr readonly>

    <br>

    <input type="text" name="leap" value="" size="12" class=ctr readonly>

<tr>
<td colspan=2 align=center>
<input type="button" value="Calculate" onClick="calcIndianCivilCalendar();">
</table>
</form>

A bewildering variety of calendars have been and continue to be
used in the Indian subcontinent.  In 1957 the Indian
government's Calendar Reform Committee adopted the National
Calendar of India for civil purposes and, in addition,
defined guidelines to standardise computation of the
religious calendar, which is based on astronomical
observations.  The civil calendar is used throughout India
today for administrative purposes, but a variety of
religious calendars remain in use.  We present the civil
calendar here.

<p>

The National Calendar of India is composed of 12 months.
The first month, <em>Caitra</em>, is 30 days in normal
and 31 days in leap years.  This is followed by five
consecutive 31 day months, then six 30 day months.  Leap
years in the Indian calendar occur in the same years as
as in the Gregorian calendar; the two calendars thus
have identical accuracy and remain synchronised.

<p>

Years in the Indian calendar are counted from the start of
the Saka Era, the equinox of March 22nd of year 79 in the
Gregorian calendar, designated day 1 of month
Caitra of year 1 in the Saka Era.  The calendar was
officially adopted on 1 Caitra, 1879 Saka Era, or
March 22nd, 1957 Gregorian.  Since year 1 of the Indian
calendar differs from year 1 of the Gregorian, to
determine whether a year in the Indian calendar is a leap
year, add 78 to the year of the Saka era then
apply the Gregorian calendar rule to the sum.

<br clear=left>

            <h3>French Republican Calendar</h3>

<form name="french">
<table align=left hspace=8 width="45%" border cellpadding=5 bgcolor="#D0D0D0">

<tr>
<th>
    Date:
<td align=center>

    Année

    <input type="text" name="an" value="" size="5">

    de la République

    <br>

    Mois de

    <select name=mois size=1>
        <option value=1>Vendémiaire
        <option value=2>Brumaire
        <option value=3>Frimaire
        <option value=4>Nivôse
        <option value=5>Pluviôse
        <option value=6>Ventôse
        <option value=7>Germinal
        <option value=8>Floréal
        <option value=9>Prairial
        <option value=10>Messidor
        <option value=11>Thermidor
        <option value=12>Fructidor
        <option value=13>(Sans-culottides)
    </select>

    <br>

    Décade
    <select name=decade size=1>
        <option value=1>I
        <option value=2>II
        <option value=3>III
    </select>

    Jour
        <select name=jour size=1>
        <option value=1>du Primidi
        <option value=2>du Duodi
        <option value=3>du Tridi
        <option value=4>du Quartidi
        <option value=5>du Quintidi
        <option value=6>du Sextidi
        <option value=7>du Septidi
        <option value=8>du Octidi
        <option value=9>du Nonidi
        <option value=10>du Décadi
        <option value=11>------------
        <option value=12>de la Vertu
        <option value=13>du Génie
        <option value=14>du Travail
        <option value=15>de l'Opinion
        <option value=16>des Récompenses
        <option value=17>de la Révolution
    </select>

<tr>
<td colspan=2 align=center>
<input type="button" value="Calculate" onClick="calcFrench();">
</table>
</form>

The French Republican calendar was adopted by a
<a href="fr_decret.html" target="_blank">decree</a> of <em>La
Convention Nationale</em> on Gregorian date October 5, 1793
and went into effect the following November 24th, on which
day Fabre d'Églantine proposed to the <em>Convention</em>
the names for the months.  It incarnates the revolutionary
spirit of "Out with the old!  In with the relentlessly
rational!" which later gave rise in 1795 to the metric
system of weights and measures which has proven more durable
than the Republican calendar.

<p>

The calendar consists of 12 months of 30 days each, followed
by a five- or six-day holiday period, the
<em>jours complémentaires</em> or
<em>sans-culottides</em>.  Months are grouped into four
seasons; the three months of each season end with the same
letters and rhyme with one another.  The calendar begins on
Gregorian date September 22nd, 1792, the September
equinox and date of the founding of the First Republic.
This day is designated the first day of the month of
Vendémiaire in year 1 of the Republic.  Subsequent years
begin on the day in which the September equinox occurs as
reckoned at the Paris meridian.  Days begin at true solar
midnight.  Whether the <em>sans-culottides</em> period
contains five or six days depends on the actual
date of the equinox.  Consequently, there is no leap year rule
<em>per se</em>: 366 day years do not recur in a regular
pattern but instead follow the dictates of astronomy.  The
calendar therefore stays perfectly aligned with the seasons.
No attempt is made to synchronise months with the phases of
the Moon.

<p>

The Republican calendar is rare in that it has no
concept of a seven day week.  Each thirty day month
is divided into three <em>décades</em> of ten days
each, the last of which, <em>décadi</em>, was the
day of rest.  (The word "<em>décade</em>" may
confuse English speakers; the
French noun denoting ten years is "<em>décennie</em>".)
The names of days in the <em>décade</em> are derived from
their number in the ten day sequence.  The five or
six days of the <em>sans-culottides</em> do not bear
the names of the <em>décade</em>.  Instead, each of these holidays
commemorates an aspect of the republican spirit.
The last, <em>jour de la Révolution</em>, occurs only
in years of 366 days.

<p>

Napoléon abolished the Republican calendar in favour
of the Gregorian on January 1st, 1806.  Thus France, one
of the first countries to adopt the Gregorian calendar
(in December 1582), became the only country to subsequently
abandon and then re-adopt it.  During the period of the
Paris Commune uprising in 1871 the Republican calendar
was again briefly used.

<p>

The <a href="fr_decret.html" target="_blank">original decree</a>
which established the Republican calendar contained a
contradiction: it defined the year as starting on the day
of the true autumnal equinox in Paris, but further prescribed
a four year cycle called <em>la Franciade</em>, the fourth
year of which would end with <em>le jour de la Révolution</em>
and hence contain 366 days.  These two specifications are
incompatible, as 366 day years defined by the equinox do
not recur on a regular four year schedule.  This problem was
recognised shortly after the calendar was proclaimed, but the
calendar was abandoned five years before the first conflict
would have occurred and the issue was never formally resolved.  Here
we assume the equinox rule prevails, as a rigid four year
cycle would be no more accurate than the Julian calendar, which
couldn't possibly be the intent of its enlightened Republican
designers.

<br clear=left>

      <h3>ISO-8601 Week and Day, and Day of Year</h3>

<form name="isoweek">
<table align=left hspace=8 width="45%" border cellpadding=5 bgcolor="#D0D0D0">

<tr>
<td align=center>

    Day <input type="text" name="day" value="" size="3"> of
    week <input type="text" name="week" value="" size="3"> of
    year <input type="text" name="year" value="" size="5">

<tr>
<td align=center>
<input type="button" value="Calculate" onClick="calcIsoWeek();">
</table>
</form>

The
<a href="http://www.iso.ch/" target="_blank">International Standards Organisation</a>
(ISO) issued
Standard ISO 8601, "Representation of Dates" in 1988,
superseding the earlier ISO 2015.  The bulk of the standard
consists of standards for representing dates in the
Gregorian calendar including the highly recommended
"<b>YYYY-MM-DD</b>" form which is unambiguous, free of cultural
bias, can be sorted into order without rearrangement, and is
Y9K compliant.  In addition, ISO 8601 formally defines the
"calendar week" often encountered in commercial transactions
in Europe.  The first calendar week of a year: week 1, is
that week which contains the first Thursday of the year (or,
equivalently, the week which includes January 4th of the
year; the first day of that week is the previous Monday).
The last week: week 52 or 53 depending on the
date of Monday in the first week, is that which contains
December 31 of the year.  The first ISO calendar week of a
given year starts with a Monday which can be as early as
December 29th of the previous year or as late as January
4th of the present; the last calendar week can end as late
as Sunday, January 3rd of the subsequent year.
ISO 8601 dates in year, week, and day form are written
with a "W" preceding the week number, which bears a leading
zero if less than 10, for example February 29th, 2000
is written as 2000-02-29 in year, month, day format and
2000-W09-2 in year, week, day form; since the day number
can never exceed 7, only a single digit is required.
The hyphens may be elided for brevity and the day number
omitted if not required.  You will frequently see date of
manufacture codes such as "00W09" stamped on products; this
is an abbreviation of 2000-W09, the ninth week of year 2000.
<br clear=left>

<p>

<form name="isoday">
<table align=left hspace=8 width="45%" border cellpadding=5 bgcolor="#D0D0D0">

<tr>
<td align=center>

    Day <input type="text" name="day" value="" size="3"> of
    year <input type="text" name="year" value="" size="5">

<tr>
<td align=center>
<input type="button" value="Calculate" onClick="calcIsoDay();">
</table>
</form>

In solar calendars such as the Gregorian, only days and
years have physical significance: days are defined by the
rotation of the Earth, and years by its orbit about the Sun.
Months, decoupled from the phases of the Moon, are but a
memory of forgotten lunar calendars, while weeks of seven days
are entirely a social construct--while most calendars in use
today adopt a cycle of seven day names or numbers, calendars
with name cycles ranging from four to sixty days have been
used by other cultures in history.

<p>

ISO 8601 permits us to jettison the historical and cultural
baggage of weeks and months and express a date simply by
the year and day number within that year, ranging from 001
for January 1st through 365 (366 in a leap year) for
December 31st.  This format makes it easy to do arithmetic
with dates within a year, and only slightly more complicated
for periods which span year boundaries.  You'll
see this representation used in project planning and for specifying delivery
dates.  ISO dates in this form are written as "<b>YYYY-DDD</b>",
for example 2000-060 for February 29th, 2000; leading zeroes
are always written in the day number, but the hyphen may be
omitted for brevity.

<p>

All ISO 8601 date formats have the advantages of being
fixed length (at least until the Y10K crisis rolls around) and, when
stored in a computer, of being sorted in date order
by an alphanumeric sort of their textual representations.
The ISO week and day and day of year calendars are
derivative of the Gregorian calendar and share its accuracy.

<p>

You can <a href="http://www.iso.ch/markete/8601.pdf">download the ISO 8601
standard</a> from the ISO Web site; to read this PDF document you'll
need <a href="http://www.adobe.com/" target="_blank">Adobe</a> Acrobat Reader, which is
available as a
<a href="http://www.adobe.com/products/acrobat/readstep.html" target="_blank">free download</a>
from Adobe's site.

<br clear=left>

                         <h3>Unix <tt>time()</tt> value</h3>

<form name="unixtime">
<table align=left width="45%" hspace=8 border cellpadding=5 bgcolor="#D0D0D0">

<tr>
<td align=center>
    <b>Unix time() value:</b>

    <input type="text" name="time" value="" size="14">
<tr>
<td colspan=2 align=center>
<input type="button" value="Calculate" onClick="calcUnixTime();">
</table>
</form>

Development of the Unix operating system began at Bell Laboratories
in 1969 by Dennis Ritchie and Ken Thompson, with the first
PDP-11 version becoming operational in February 1971.  Unix wisely
adopted the convention that all internal dates and times (for example,
the time of creation and last modification of files) were kept in
Universal Time, and converted to local time based on a per-user
time zone specification.  This far-sighted choice has made it
vastly easier to integrate Unix systems into far-flung networks
without a chaos of conflicting time settings.

<p>

The machines on which Unix was developed and initially deployed
could not support arithmetic on integers longer than 32 bits
without costly multiple-precision computation in software.
The internal representation of time was therefore chosen to be
the number of seconds elapsed since
00:00 Universal time on January 1, 1970 in the Gregorian
calendar (Julian day 2440587.5), with time stored as a 32
bit signed integer (<tt>long</tt> in the original C implementation).

<p>

The influence of Unix time representation has spread well
beyond Unix since most C and C++ libraries on other systems
provide Unix-compatible time and date functions.  The major
drawback of Unix time representation is that, if kept as a
32 bit signed quantity, on January 19, 2038 it will go
negative, resulting in chaos in programs unprepared for
this.  Modern Unix and C implementations define the result
of the <tt>time()</tt> function as type <tt>time_t</tt>,
which leaves the door open for remediation (by changing the
definition to a 64 bit integer, for example) before the
clock ticks the dreaded doomsday second.

<br clear=left>

                         <h3>Excel Serial Day Number</h3>

<form name="excelserial1900">
<table align=left hspace=8 width="45%" border cellpadding=5 bgcolor="#D0D0D0">

<tr>
<td align=center>
    <b><font size="+1">1900 Date System (PC)</font></b>
    <br>
    <b>Excel serial day:</b>

    <input type="text" name="day" value="" size="16">
<tr>
<td colspan=2 align=center>
<input type="button" value="Calculate" onClick="calcExcelSerial1900();">
</table>
</form>

Spreadsheet calculations frequently need to do arithmetic with date
and time quantities--for example, calculating the interest on a loan
with a given term.  When Microsoft Excel was introduced for the PC
Windows platform, it defined dates and times as "serial values", which
express dates and times as the number of days elapsed since midnight
on January 1, 1900 with time given as a fraction of a day.  Midnight
on January 1, 1900 is day 1.0 in this scheme.  Time zone is
unspecified in Excel dates, with the <tt>NOW()</tt> function returning
whatever the computer's clock is set to--in most cases local time, so
when combining data from machines in different time zones you usually
need to add or subtract the bias, which can differ over the year due
to observance of summer time.  Here we assume Excel dates represent
Universal (Greenwich Mean) time, since there isn't any other rational
choice.  But don't assume you can always get away with this.

<p>

You'd be entitled to think, therefore, that conversion back and
forth between PC Excel serial values and Julian day numbers would
simply be a matter of adding or subtracting the Julian day number
of December 31, 1899 (since the PC Excel days are numbered from 1).
But this is a <em>Microsoft</em> calendar, remember, so one must
first look to make sure it doesn't contain one of those bonehead
blunders characteristic of Microsoft.  As is usually the case,
one doesn't have to look very far.  If you have a copy of PC
Excel, fire it up, format a cell as containing a date, and
type 60 into it: out pops "February 29, 1900".  News apparently
travels <em>very</em> slowly from Rome to Redmond--ever since
Pope Gregory revised the calendar in 1582, years divisible
by 100 have <em>not</em> been leap years, and consequently the
year 1900 contained no February 29th.  Due to this morsel of
information having been lost somewhere between the Holy See and
the <a href="/documents/top10.html">Infernal</a> Seattle monopoly,
all Excel day numbers for days subsequent to February 28th, 1900
are one day greater than the actual day count from January 1, 1900.
Further, note that any computation of the number of days in
a period which begins in January or February 1900 and ends in a
subsequent month will be off by one--the day count will be one
greater than the actual number of days elapsed.

<p>

By the time the 1900 blunder was discovered, Excel users had
created millions of spreadsheets containing incorrect
day numbers, so Microsoft decided to leave the error in place
rather than force users to convert their spreadsheets, and the
error remains to this day.  Note, however, that <em>only 1900</em>
is affected; while the first release of Excel probably also
screwed up all years divisible by 100 and hence implemented a
purely Julian calendar, contemporary versions do correctly
count days in 2000 (which is a leap year, being divisible by
400), 2100, and subsequent end of century years.

<p>

PC Excel day numbers are valid only between 1 (January 1, 1900) and
2958465 (December 31, 9999).  Although a serial day counting scheme
has no difficulty coping with arbitrary date ranges or days before
the start of the epoch (given sufficient precision in the representation
of numbers), Excel doesn't do so.  Day 0 is deemed the idiotic
January 0, 1900 (at least in Excel 97), and negative days and
those in Y10K and beyond are not handled at all.  Further, old
versions of Excel did date arithmetic using 16 bit quantities
and did not support day numbers greater than 65380 (December
31, 2078); I do not know in which release of Excel this 
limitation was remedied.

<br clear=left>

<form name="excelserial1904">
<table align=left hspace=8 width="45%" border cellpadding=5 bgcolor="#D0D0D0">

<tr>
<td align=center>
    <b><font size="+1">1904 Date System (Macintosh)</font></b>
    <br>
    <b>Excel serial day:</b>

    <input type="text" name="day" value="" size="16">
<tr>
<td colspan=2 align=center>
<input type="button" value="Calculate" onClick="calcExcelSerial1904();">
</table>
</form>

Having saddled every PC Excel user with a defective date
numbering scheme wasn't enough for Microsoft--nothing ever is.
Next, they proceeded to come out with a Macintosh version
of Excel which uses an <em>entirely different</em> day numbering
system based on the MacOS native time format which counts
seconds elapsed since January 1, 1904.  To further obfuscate
matters, on the Macintosh they chose to number days from zero
rather than 1, so midnight on January 1, 1904 has serial
value 0.0.  By starting in 1904, they avoided screwing up 1900
as they did on the PC.  So now Excel users who interchange data
have to cope with two incompatible schemes for counting days, one
of which thinks 1900 was a leap year and the other which
doesn't go back that far.  To compound the fun, you can now
select either date system on either platform, so you can't be
certain dates are compatible even when receiving data from
another user with same kind of machine you're using.  I'm
sure this was all done in the interest of the "efficiency"
of which Microsoft is so fond.  As we all know, it would take a computer
<em>almost forever</em> to add or subtract four in order to make everything
seamlessly interchangeable.

<p>

Macintosh Excel day numbers are valid only between 0
(January 1, 1904) and 2957003 (December 31, 9999).  Although
a serial day counting scheme has no difficulty coping with
arbitrary date ranges or days before the start of the epoch
(given sufficient precision in the representation of
numbers), Excel doesn't do so.  Negative days and those in
Y10K and beyond are not handled at all.  Further, old
versions of Excel did date arithmetic using 16 bit
quantities and did not support day numbers greater than
63918 (December 31, 2078); I do not know in which release of
Excel this limitation was remedied.

<br clear=left>


<script language="JavaScript">
<!--
    calcGregorian();                  // Calculate today's values in other calendars
// -->
</script>



<h3>References</h3>

<dl>

<table align=right width=170 hspace=12>
<tr>
<td bgcolor="#E0E0E0" align=center>
<font face="Helvetica" size="-1">
Click on titles to order books on-line from
<br> <a href="http://www.amazon.com/exec/obidos/redirect-home/fourmilabwwwfour" target="Amazon_Fourmilab"><img src="/images/icons/amazon.gif" vspace=3 width=90 height=29 border=0 alt="Amazon.com."></a>
</font>
</table>

<dt>Meeus, Jean.
<cite>
<a href="http://www.amazon.com/exec/obidos/ASIN/0943396352/fourmilabwwwfour" target="Amazon_Fourmilab">
Astronomical Algorithms
</a>
</cite>.  Richmond: Willmann-Bell,
1991.  ISBN 0-943396-35-2.
<dd>The essential reference for computational positional
astronomy.

<p>
<dt>P. Kenneth Seidelmann (ed.)
<cite>
<a href="http://www.amazon.com/exec/obidos/ASIN/0935702687/fourmilabwwwfour" target="Amazon_Fourmilab">
Explanatory Supplement to the Astronomical Almanac 
</a>
</cite>.  Sausalito CA: University Science Books,
1992.  ISBN 0-935702-68-7.
<dd>Authoritative reference on a wealth of topics related to
    computational geodesy and astronomy.  Various calendars
    are described in depth, including techniques for
    interconversion.

<p>
<dt>The <a href="http://www.bdl.fr/" target="_blank">Institut de mécanique céleste
    et de calcul des éphémérides</a> in Paris provides excellent
    on-line descriptions of a variety of
    <a href="http://www.bdl.fr/minitel/calendrier/calendriers.html" target="_blank">calendars</a>.

<br clear=right>

</dl>

<p>
<hr>
<p>
<address>
by <a href="/">John Walker</a><br>
November, MM
</address>
<center>
<em>This document is in the public domain.</em>
</center>
</body>
</html>
